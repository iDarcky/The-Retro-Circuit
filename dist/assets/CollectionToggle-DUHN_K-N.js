import{j as n,B as g}from"./ui-utils-Bc8hcx-Q.js";import{r as i,b as T}from"./vendor-react-DYQUvfhN.js";import{r as N,j as C,p as h,q as O}from"./index-B-i4yEhk.js";const _=({itemId:e,itemType:a,itemName:d,itemImage:f})=>{const[t,o]=i.useState(null),[r,c]=i.useState(!1),x=T();i.useEffect(()=>{(async()=>{if(await N.getUser()){const u=(await C()).find(m=>m.item_id===e&&m.item_type===a);u&&o(u.status)}})()},[e,a]);const l=async s=>{if(c(!0),!await N.getUser()){x("/login");return}t===s?(await h(e),o(null)):(await O({id:"",user_id:"",item_id:e,item_type:a,status:s,item_name:d,item_image:f}),o(s)),c(!1)};return n.jsxs("div",{className:"flex gap-2",children:[n.jsx(g,{variant:t==="OWN"?"primary":"secondary",className:`flex-1 text-xs py-1 ${t==="OWN"?"bg-retro-neon/20":""}`,onClick:()=>l("OWN"),isLoading:r,children:t==="OWN"?"IN COLLECTION":"+ I OWN THIS"}),n.jsx(g,{variant:t==="WANT"?"danger":"secondary",className:`flex-1 text-xs py-1 ${t==="WANT"?"bg-retro-pink/20":""}`,onClick:()=>l("WANT"),isLoading:r,children:t==="WANT"?"ON WISHLIST":"+ I WANT THIS"})]})};export{_ as C};
